---
title: Using Inspectr with FastMCP
description: Build MCP servers with FastMCP and debug them with Inspectr for complete tool, resource, and prompt visibility
---

import { FlowIngress } from '../../../../components/DocFlows/FlowFastMcp.jsx';
import { Image } from 'astro:assets';

import inspectrExpose from '../../../../assets/guides/inspectr-expose.png';
import mcpTracingToolList from '../../../../assets/features/mcp/mcp-tracing-toollist.png';
import mcpTracingInfo from '../../../../assets/features/mcp/mcp-info-02.png';

<FlowIngress client:only="react" />

[FastMCP](https://gofastmcp.com) is the fast, Pythonic way to build Model Context Protocol (MCP) servers. Write simple Python functions with decorators, and FastMCP handles the protocol complexity.

This example shows how to use Inspectr alongside FastMCP to capture and inspect every MCP operation—without modifying your code. Inspectr tunnels traffic between your FastMCP server and MCP clients, providing visibility into tools, resources, prompts, token usage, and errors.

---

## What You'll Learn

This example demonstrates:

- Creating a minimal FastMCP server with a single tool
- Running Inspectr as a transparent proxy to capture MCP traffic
- Exposing your local FastMCP server publicly via Inspectr tunneling
- Inspecting tool calls, token usage, and errors in the Inspectr UI
- Connecting MCP clients (Claude Desktop, ChatGPT, Cursor) to your tunneled server

---

## Prerequisites

Before you begin, ensure you have:

- **Python 3.9+** installed
- **pip** for package management
- **Inspectr** installed ([Installation guide →](/docs/getting-started/installation))

---

## Step 1: Install FastMCP

Install FastMCP via pip:

```bash
pip install fastmcp
```

For additional FastMCP features and documentation, visit [gofastmcp.com](https://gofastmcp.com).

---

## Step 2: Create a FastMCP Server

Create `weather.py`:

```python
from fastmcp import FastMCP

mcp = FastMCP("weather-tools")

@mcp.tool()
def get_weather(location: str) -> str:
    """Get current weather for a location"""
    return f"Sunny, 72°F in {location}"

if __name__ == "__main__":
    mcp.run()
```

The `@mcp.tool()` decorator exposes your function as an MCP tool. FastMCP handles the protocol handshake and response serialization automatically.

For resources, prompts, and advanced patterns, see the [FastMCP quickstart](https://gofastmcp.com/quickstart).

---

## Step 3: Run Inspectr as a Proxy

Start your FastMCP server, then run Inspectr:

```bash
# Terminal 1: Start FastMCP server
python weather.py

# Terminal 2: Start Inspectr proxy
inspectr --backend=http://localhost:8000 --listen=:8080
```

Inspectr now listens on port 8080 and forwards traffic to your FastMCP server on port 8000. The Inspectr UI runs at `http://localhost:4004`.

<Image src={inspectrExpose} alt="Inspectr proxying FastMCP server" />

Point MCP clients to `http://localhost:8080` instead of directly to your FastMCP server. All traffic flows through Inspectr and appears in the UI.

---

## Step 4: Test MCP Operations

Call your FastMCP tool via Inspectr using an MCP client or directly via curl:

```bash
curl -X POST http://localhost:8080 \
  -H "Content-Type: application/json" \
  -d '{
    "jsonrpc": "2.0",
    "id": 1,
    "method": "tools/call",
    "params": {
      "name": "get_weather",
      "arguments": {
        "location": "San Francisco"
      }
    }
  }'
```

**Expected response:**

```json
{
  "jsonrpc": "2.0",
  "id": 1,
  "result": {
    "content": [
      {
        "type": "text",
        "text": "Sunny, 72°F in San Francisco"
      }
    ]
  }
}
```

Visit the Inspectr UI at `http://localhost:4004` to see the captured request.

<Image src={mcpTracingToolList} alt="Inspectr capturing MCP tools" />

---

## What Inspectr Captures

<Image src={mcpTracingInfo} alt="Detailed MCP request inspection" />

Inspectr automatically extracts MCP-specific metadata from every request:

- **Operation type** – Tools, resources, prompts, or system calls
- **Operation name** – Extracted from params (e.g., `get_weather`)
- **Token usage** – Request, response, and total token counts
- **Session tracking** – Correlates related calls via MCP session IDs
- **Timing** – Latency per operation for performance analysis
- **Errors** – JSON-RPC error codes and messages with full context

Use this data to identify frequently-called tools, optimize token-heavy operations, and debug failures with complete request/response payloads.

---

## Exposing Your Server via Tunneling

Inspectr can expose your local FastMCP server publicly using the `--expose` flag. This creates a secure tunnel, giving you a public URL that MCP clients anywhere can connect to.

Start Inspectr with tunneling enabled:

```bash
inspectr \
  --backend=http://localhost:8000 \
  --expose \
  --channel=my-fastmcp \
  --channel-code=secure-token-123
```

You'll see output like:

```
Inspectr tunnel active at: https://my-fastmcp.in-spectr.dev
UI available at: http://localhost:4004
```

**What this enables:**

- **Remote access** – Share the public URL with teammates or clients without deploying infrastructure
- **MCP client testing** – Configure Claude Desktop, ChatGPT, or Cursor to use `https://my-fastmcp.in-spectr.dev`
- **No firewall config** – Tunnel handles NAT traversal and works from anywhere
- **Full observability** – All tunneled traffic appears in the Inspectr UI

### Connecting Claude Desktop

Edit your Claude Desktop config (`~/.claude/claude_desktop_config.json`):

```json
{
  "mcpServers": {
    "weather-tools": {
      "command": "npx",
      "args": ["mcp-remote", "https://my-fastmcp.in-spectr.dev"]
    }
  }
}
```

Claude can now invoke your FastMCP tools through the Inspectr tunnel, and you'll see every request in the UI.

**Security notes:**
- Use strong `--channel-code` values (e.g., `openssl rand -hex 16`)
- Add rate limiting via [Rules Engine →](/docs/features/inspectr-rules-engine)
- See [Exposing Publicly →](/docs/guides/exposing-publicly) for authentication options

---

## Summary

FastMCP lets you build MCP servers with minimal code. Inspectr adds zero-config observability and tunneling:

- **Transparent capture** – See every tool call, resource read, and prompt invocation
- **Token tracking** – Monitor usage and optimize costs
- **Secure tunneling** – Expose local servers publicly without deployment
- **Multi-client testing** – Connect Claude Desktop, ChatGPT, Cursor, and more
- **Full inspection** – Request/response payloads, errors, and latency metrics

Build fast. Debug visually. Ship confidently.

---

## Related Links

**Inspectr Documentation:**
- [MCP Observability guide →](/docs/guides/mcp-observability)
- [MCP Insights feature →](/docs/features/inspectr-mcp-insights)
- [Exposing Services Publicly →](/docs/guides/exposing-publicly)
- [Rules Engine for rate limiting →](/docs/features/inspectr-rules-engine)

**FastMCP Resources:**
- [FastMCP Documentation](https://gofastmcp.com) – Complete FastMCP guide
- [FastMCP GitHub](https://github.com/jlowin/fastmcp) – Source code and examples
- [FastMCP Quickstart](https://gofastmcp.com/quickstart) – Getting started tutorial
